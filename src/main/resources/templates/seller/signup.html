<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒë§¤ì íšŒì›ê°€ì… í˜ì´ì§€</title>
    <link rel="stylesheet"  href="../css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">

    <style>
        /* 1. ê³ ì • ë†’ì´ ëŒ€ì‹  ìµœì†Œ ë†’ì´ë¥¼ ì„¤ì •í•˜ì—¬ ìŠ¤í¬ë¡¤ í—ˆìš© */
        body {
            min-height: 100vh; /* í™”ë©´ ì „ì²´ ë†’ì´ í™•ë³´ */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* ì¤‘ì•™ ê³ ì • ëŒ€ì‹  ìœ„ìª½ë¶€í„° ë°°ì¹˜ */
            padding: 40px 0; /* ìœ„ì•„ë˜ ì£¼ì†Œì°½ì— ê°€ë¦¬ì§€ ì•Šê²Œ ì—¬ë°± ì¶”ê°€ */
            background-color: #f8f9fa;
        }

        .register-container {
            max-width: 550px;
            width: 95%; /* ëª¨ë°”ì¼ ëŒ€ì‘: í™”ë©´ ë„ˆë¹„ê°€ ì‘ì„ ë•Œ ì—¬ë°± í™•ë³´ */
            padding: 30px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,.1);
            background-color: #fff;
            /* margin-top/bottomì€ body paddingìœ¼ë¡œ ëŒ€ì²´ë˜ë¯€ë¡œ ì‚­ì œ ê°€ëŠ¥ */
        }

        /* fieldset ë‚´ë¶€ ì—¬ë°± ì¡°ì • */
        fieldset {
            border: 1px solid #e9ecef;
            padding: 15px 20px;
            margin-bottom: 25px;
            border-radius: 6px;
        }

        /* ë ˆì „ë“œ í°íŠ¸ êµµê¸° ì¶”ê°€ */
        legend {
            width: auto;
            padding: 0 10px;
            font-size: 1.1em;
            font-weight: bold;
            color: #007bff;
        }

        .required-mark { color: #ae0000; margin-left: 2px; }

        .input-error {
            border-color: #dc3545 !important;
            color: #dc3545;
        }
    </style>
</head>
<body class="d-flex justify-content-center align-items-center bg-light">

<div class="register-container">
    <h3 class="text-center mb-4">ğŸ›ï¸ íŒë§¤ì íšŒì›ê°€ì…</h3>
    <p class="text-center text-muted mb-4" style="font-size: 0.95rem;">
        ê³„ì • ì •ë³´ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ì •ë³´ë¥¼ ì…ë ¥í•˜ì—¬ íŒë§¤ì í™œë™ì„ ì‹œì‘í•˜ì„¸ìš”.
    </p>

    <form th:action="@{/seller/signup}" th:object="${signUpSeller}" method="post">
        <fieldset>
            <legend>ğŸ‘¤ ê³„ì • ì •ë³´</legend>

            <div class="form-group">
                <label for="id">ì•„ì´ë””<span class="required-mark">*</span></label>
                <input
                        type="text"
                        class="form-control"
                        id="id"
                        th:field="*{id}"
                        placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì‹œì˜¤"
                        onblur="checkDuplicateId()"
                >
                <div class="text-danger" style="font-size: 0.875rem;" id="duplicatedId"></div>
            </div>

            <div class="form-group">
                <label for="password">ë¹„ë°€ë²ˆí˜¸<span class="required-mark">*</span></label>
                <input
                        type="password"
                        class="form-control"
                        id="password"
                        th:field="*{password}"
                        placeholder="ìµœì†Œ 8ì ì´ìƒì˜ ë¹„ë°€ë²ˆí˜¸"
                        th:errorclass="input-error"
                >
                <div class="text-danger" style="font-size: 0.875rem;" th:errors="*{password}">
                   ë¹„ë°€ë²ˆí˜¸ ì—ëŸ¬
                </div>
            </div>

            <div class="form-group">
                <label for="email">ì´ë©”ì¼ (ID)<span class="required-mark">*</span></label>
                <input
                        type="email"
                        class="form-control"
                        id="email"
                        th:field="*{email}"
                        placeholder="example@company.com"
                        th:errorclass="input-error"
                >
                <div class="text-danger" style="font-size: 0.875rem;" th:errors="*{email}">
                    ì´ë©”ì¼ ì—ëŸ¬
                </div>
            </div>


            <div class="form-group">
                <label for="name">ë‹´ë‹¹ì ì´ë¦„<span class="required-mark">*</span></label>
                <input
                        type="text"
                        class="form-control"
                        id="name"
                        th:field="*{name}"
                        placeholder="í™ê¸¸ë™"
                        th:errorclass="input-error"
                >
                <div class="text-danger" style="font-size: 0.875rem;" th:errors="*{name}">
                    ë‹´ë‹¹ì ì´ë¦„ ì—ëŸ¬
                </div>
            </div>

            <div class="form-group">
                <label for="phoneNumber">ì „í™”ë²ˆí˜¸<span class="required-mark">*</span></label>
                <input
                        type="text"
                        class="form-control"
                        id="phoneNumber"
                        th:field="*{phoneNumber}"
                        placeholder="010-0000-0000"
                        th:errorclass="input-error"
                >
                <div class="text-danger" style="font-size: 0.875rem;" th:errors="*{phoneNumber}">
                    ì „í™”ë²ˆí˜¸ ì—ëŸ¬
                </div>
            </div>

        </fieldset>

        <fieldset>
            <legend>ğŸ¢ ë¹„ì¦ˆë‹ˆìŠ¤ ì •ë³´</legend>

            <div class="form-group">
                <label for="companyName">íšŒì‚¬/ìƒí˜¸ëª…<span class="required-mark">*</span></label>
                <input
                        type="text"
                        class="form-control"
                        id="companyName"
                        th:field="*{companyName}"
                        placeholder="OO ì£¼ì‹íšŒì‚¬ ë˜ëŠ” ìƒí˜¸ëª…"
                        th:errorclass="input-error"
                >
                <div class="text-danger" style="font-size: 0.875rem;" th:errors="*{companyName}">
                    íšŒì‚¬ëª… ì—ëŸ¬
                </div>
            </div>

            <div class="form-group">
                <label for="companyPhone">íšŒì‚¬ ì „í™”ë²ˆí˜¸</label>
                <input
                        type="text"
                        class="form-control"
                        id="companyPhone"
                        th:field="*{companyPhone}"
                        placeholder="000-00-00000"
                >
            </div>

            <div class="form-group">
                <label>ì£¼ì†Œ<span class="required-mark">*</span></label>
                <div class="row mb-2">
                    <div class="col-6 pr-1">
                        <input type="text" id="postcode" placeholder="ìš°í¸ë²ˆí˜¸" class="form-control" readonly th:field="*{postcode}" th:errorclass="input-error">
                    </div>
                    <div class="col-6 pl-1">
                        <input type="button" onclick="execDaumPostcode()" value="ìš°í¸ë²ˆí˜¸ ì°¾ê¸°" class="btn btn-outline-secondary w-100">
                    </div>
                </div>

                <input type="text" id="roadAddress" placeholder="ë„ë¡œëª…ì£¼ì†Œ" class="form-control mb-2" readonly th:field="*{roadAddress}" th:errorclass="input-error">
                <input type="text" id="detailAddress" placeholder="ìƒì„¸ì£¼ì†Œ (ë™, í˜¸ìˆ˜ ë“±)" class="form-control mb-2" th:field="*{detailAddress}">
                <span id="guide" style="color:#999; display:none; font-size: 0.875rem;" class="mt-2"></span>
                <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                <div class="text-danger" style="font-size: 0.875rem;" th:errors="*{postcode}">
                    ì£¼ì†Œ ì—ëŸ¬
                </div>
            </div>


<!--            <div class="form-group">
                <label for="mainCategory">[ì„ íƒ]ì£¼ìš” íŒë§¤ í’ˆëª©</label>
                <select id="mainCategory" class="form-control">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="fashion">íŒ¨ì…˜/ì˜ë¥˜</option>
                    <option value="food">ì‹í’ˆ/ê±´ê°•</option>
                    <option value="digital">ê°€ì „/ë””ì§€í„¸</option>
                    <option value="living">ìƒí™œ/ì£¼ë°©</option>
                    <option value="etc">ê¸°íƒ€</option>
                </select>
                <div class="text-danger" style="font-size: 0.875rem;" th:errors="*{mainCategory}">
                    ì¹´í…Œê³ ë¦¬ ì—ëŸ¬
                </div>
            </div>-->
        </fieldset>

        <div class="form-group form-check mb-4 mt-3">
            <input type="checkbox" class="form-check-input" id="termsAgree">
            <label class="form-check-label" for="termsAgree">
                <a href="#" class="text-primary text-decoration-none">íŒë§¤ì ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>ì— ë™ì˜í•©ë‹ˆë‹¤.
            </label>
        </div>

        <div class="mb-3">
            <button type="submit" id="signupButton" class="btn btn-success w-100" style="padding: 10px;">
                íŒë§¤ì ê°€ì… ì™„ë£Œ
            </button>
        </div>

        <hr>

        <div class="text-center mt-3">
            ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?
            <a href="#" onclick="location.href='seller-login.html'" class="text-decoration-none text-primary"
               th:onclick="|location.href='@{/seller/login}'|">íŒë§¤ì ë¡œê·¸ì¸</a>
        </div>
    </form>
</div>

<script th:inline="javascript">
    function checkDuplicateId() {
        const id = document.getElementById('id');
        const idVal = id.value;
        const msg = document.getElementById('duplicatedId');
        const button = document.getElementById('signupButton');

        if (idVal === "") {
            msg.innerText = "ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”";
            id.classList.add("input-error");
            button.disabled = true;
            return;
        }
        fetch(`/seller/signup/checkId?sellerId=${idVal}`)
            .then(res => res.json())
            .then(isAvailable => {
                if(isAvailable) {
                    msg.innerText = "";
                    id.classList.remove("input-error");
                    button.disabled = false;
                }
                else {
                    msg.innerText = "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤."
                    id.classList.add("input-error");
                    button.disabled = true;
                }
            })
            .catch(err => console.log("checkDuplicateId Error:", err))
    }

    function execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                var roadAddr = data.roadAddress; // ë„ë¡œëª… ì£¼ì†Œ ë³€ìˆ˜
                var extraRoadAddr = ''; // ì°¸ê³  í•­ëª© ë³€ìˆ˜

                if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
                    extraRoadAddr += data.bname;
                }
                // ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
                if(data.buildingName !== '' && data.apartment === 'Y'){
                    extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                }
                // í‘œì‹œí•  ì°¸ê³ í•­ëª©ì´ ìˆì„ ê²½ìš°, ê´„í˜¸ê¹Œì§€ ì¶”ê°€í•œ ìµœì¢… ë¬¸ìì—´ì„ ë§Œë“ ë‹¤.
                if(extraRoadAddr !== ''){
                    extraRoadAddr = ' (' + extraRoadAddr + ')';
                }

                document.getElementById('postcode').value = data.zonecode;
                document.getElementById("roadAddress").value = roadAddr;

                var guideTextBox = document.getElementById("guide");
                if(data.autoRoadAddress) {
                    var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
                    guideTextBox.innerHTML = '(ì˜ˆìƒ ë„ë¡œëª… ì£¼ì†Œ : ' + expRoadAddr + ')';
                    guideTextBox.style.display = 'block';

                } else {
                    guideTextBox.innerHTML = '';
                    guideTextBox.style.display = 'none';
                }
            }
        }).open();
    }
</script>

</body>
</html>