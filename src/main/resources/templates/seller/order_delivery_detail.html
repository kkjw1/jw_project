<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주문 상세 | 판매자 센터</title>
    <th:block th:replace="~{seller/common :: common_style}"></th:block>

    <style th:insert="~{seller/common :: sidebar_style}">
        /* 주문 상세 테이블 */
        .detail-table th {
            width: 30%;
            background-color: #e9ecef;
        }
        .detail-table th, .detail-table td {
            padding: 10px;
            border-bottom: 1px solid #dee2e6;
        }
    </style>
</head>
<body>

<div class="d-flex">

    <th:block th:replace="~{seller/common :: sidebar}"></th:block>

    <div id="page-content-wrapper" class="flex-grow-1 p-4">
        <header class="mb-4 border-bottom pb-3 d-flex justify-content-between align-items-center">
            <h1 class="h3 mb-0 text-dark"><i class="fas fa-receipt me-2"></i> 주문 상세 정보 (20240720-00123)</h1>
            <button class="btn btn-outline-secondary" th:onclick="|location.href='@{/order_delivery}'|" >
                <i class="fas fa-list me-1"></i> 목록으로</button>
        </header>

        <div class="card shadow-sm mb-4">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <span class="fs-5 me-3">현재 주문 상태:</span>
                    <span class="badge bg-warning text-dark fs-4 p-2"><i class="fas fa-hourglass-half me-2"></i> 결제 완료 (상품 준비 대기)</span>
                </div>
                <div class="btn-group">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#shippingModal"><i class="fas fa-box-open me-1"></i> 상품 준비 완료 및 송장 등록</button>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#cancelModal"><i class="fas fa-times me-1"></i> 주문 취소 처리</button>
                </div>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-lg-7">
                <div class="card shadow-sm h-100">
                    <div class="card-header bg-white">
                        <h5 class="mb-0"><i class="fas fa-box-seam me-2"></i> 주문 상품 정보</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-striped mb-0">
                                <thead class="table-light">
                                <tr>
                                    <th>상품명</th>
                                    <th style="width: 100px;">옵션</th>
                                    <th style="width: 50px;">수량</th>
                                    <th style="width: 100px;">판매가</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>프리미엄 와이드 팬츠</td>
                                    <td>블랙 / L</td>
                                    <td>1</td>
                                    <td>39,000원</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-footer bg-white">
                        <h5 class="mb-0"><i class="fas fa-credit-card me-2"></i> 결제 정보</h5>
                        <ul class="list-group list-group-flush mt-2">
                            <li class="list-group-item d-flex justify-content-between">
                                <span>상품 금액</span>
                                <strong>39,000 원</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>배송비</span>
                                <span class="text-muted">+ 3,000 원</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between bg-light">
                                <span class="fs-5">최종 결제 금액</span>
                                <strong class="fs-5 text-danger">42,000 원</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>결제 수단</span>
                                <span>신용카드 (***4567)</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-lg-5">
                <div class="card shadow-sm h-100">
                    <div class="card-header bg-white">
                        <h5 class="mb-0"><i class="fas fa-user-circle me-2"></i> 주문자/배송지 정보</h5>
                    </div>
                    <div class="card-body p-0">
                        <table class="table mb-0 detail-table">
                            <tr>
                                <th>주문자명</th>
                                <td>홍길동</td>
                            </tr>
                            <tr>
                                <th>연락처</th>
                                <td>010-1234-5678</td>
                            </tr>
                            <tr>
                                <th>수취인</th>
                                <td>홍길동</td>
                            </tr>
                            <tr>
                                <th>배송 주소</th>
                                <td>(08503) 서울 금천구 가산디지털1로 186</td>
                            </tr>
                            <tr>
                                <th>배송 메모</th>
                                <td>문 앞에 놓아주세요. (부재 시 경비실)</td>
                            </tr>
                            <tr>
                                <th>운송장 번호</th>
                                <td>
                                    <span class="text-danger">미등록</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="shippingModal" tabindex="-1" aria-labelledby="shippingModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="shippingModalLabel">📦 송장 정보 등록</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="courier" class="form-label">택배사 선택</label>
                        <select id="courier" class="form-select" required>
                            <option selected disabled>선택하세요</option>
                            <option>CJ대한통운</option>
                            <option>우체국택배</option>
                            <option>롯데택배</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="trackingNumber" class="form-label">운송장 번호</label>
                        <input type="text" class="form-control" id="trackingNumber" placeholder="송장 번호를 숫자만 입력" required>
                    </div>
                    <div class="alert alert-info" role="alert">
                        송장 등록 시 주문 상태가 **'배송 중'**으로 변경됩니다.
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                <button type="button" class="btn btn-success"><i class="fas fa-truck me-1"></i> 등록 및 발송 처리</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="cancelModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="cancelModalLabel">❌ 주문 취소/환불 처리</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>정말로 이 주문을 취소 처리하시겠습니까?</p>
                <div class="mb-3">
                    <label for="cancelReason" class="form-label">취소 사유 (필수)</label>
                    <textarea class="form-control" id="cancelReason" rows="3" required placeholder="취소 사유를 입력하세요. 고객에게 전달됩니다."></textarea>
                </div>
                <div class="alert alert-warning" role="alert">
                    취소 처리 시 **42,000원**이 고객에게 즉시 환불 처리됩니다. (PG사 연동 필요)
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn btn-danger"><i class="fas fa-trash-alt me-1"></i> 취소 및 환불 완료</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>